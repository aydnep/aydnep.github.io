"use strict";(self.webpackChunk_dcentralab_web3_wallet_connector=self.webpackChunk_dcentralab_web3_wallet_connector||[]).push([[8868],{86459:(e,t,r)=>{r.r(t),r.d(t,{ARRAY_REGEX:()=>C,BYTES_REGEX:()=>I,EIP_712_DOMAIN_TYPE:()=>X,EIP_712_TYPE:()=>G,EIP_712_TYPED_DATA_TYPE:()=>J,NUMBER_REGEX:()=>R,STATIC_TYPES:()=>Y,TYPE_REGEX:()=>N,asArray:()=>re,encode:()=>c,encodeData:()=>Z,encodeType:()=>K,getDependencies:()=>F,getMessage:()=>te,getStructHash:()=>ee,getTypeHash:()=>L,isValidType:()=>U,keccak256:()=>f,toBuffer:()=>u,validateTypedData:()=>V});var n=r(77848),o=r(48764).Buffer;const c=(e,t)=>o.from((0,n.cv)(e,t));var i=r(95811),a=r.n(i),s=r(48764).Buffer;const f=(e,t)=>a()("keccak256").update(e,t).digest(),u=(e,t)=>t?s.from(e,t):e.startsWith("0x")?s.from(e.substring(2),"hex"):s.from(e,"hex");function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function*h(e,t){!0===e||(!1===e?yield t.fail():yield*e)}function b(e){const{done:t,value:r}=e.next();return t?void 0:r}class m{constructor(e){const{type:t,schema:r,coercer:n=(e=>e),validator:o=(()=>[]),refiner:c=(()=>[])}=e;this.type=t,this.schema=r,this.coercer=n,this.validator=o,this.refiner=c}}class v extends TypeError{constructor(e,t){const{path:r,value:n,type:o,branch:c}=e,i=d(e,["path","value","type","branch"]);let a;super(`Expected a value of type \`${o}\`${r.length?` for \`${r.join(".")}\``:""} but received \`${JSON.stringify(n)}\`.`),this.value=n,Object.assign(this,i),this.type=o,this.path=r,this.branch=c,this.failures=function(){return a||(a=[e,...t]),a},this.stack=(new Error).stack,this.__proto__=v.prototype}}function w(e,t){const r=t.coercer(e);return function(e,t){const r=g(e,t);if(r[0])throw r[0]}(r,t),r}function g(e,t,r=!1){r&&(e=t.coercer(e));const n=O(e,t),o=b(n);if(o){return[new v(o,n),void 0]}return[void 0,e]}function*O(e,t,r=[],n=[]){const{type:o}=t,c={value:e,type:o,branch:n,path:r,fail:(t={})=>p({value:e,type:o,path:r,branch:[...n,e]},t),check:(e,t,o,c)=>O(e,t,void 0!==o?[...r,c]:r,void 0!==o?[...n,o]:n)},i=h(t.validator(e,c),c),a=b(i);a?(yield a,yield*i):yield*h(t.refiner(e,c),c)}function j(e,t){return E(e,`${e.type} & Pattern<${t.source}>`,(e=>t.test(e)))}function E(e,t,r){const n=e.refiner;return new m(p(p({},e),{},{type:t,*refiner(e,t){yield*h(n(e,t),t),yield*h(r(e,t),t)}}))}function k(e){return new m({type:`Array<${e?e.type:"unknown"}>`,schema:e,coercer:t=>e&&Array.isArray(t)?t.map((t=>w(t,e))):t,*validator(t,r){if(Array.isArray(t)){if(e)for(const[n,o]of t.entries())yield*r.check(o,e,t,n)}else yield r.fail()}})}function $(){return A("never",(()=>!1))}function _(){return A("number",(e=>"number"==typeof e&&!isNaN(e)))}function P(e){const t=e?Object.keys(e):[],r=$();return new m({type:e?`Object<{${t.join(",")}}>`:"Object",schema:e||null,coercer:e?D(e):e=>e,*validator(n,o){if("object"==typeof n&&null!=n){if(e){const c=new Set(Object.keys(n));for(const r of t){c.delete(r);const t=e[r],i=n[r];yield*o.check(i,t,n,r)}for(const e of c){const t=n[e];yield*o.check(t,r,n,e)}}}else yield o.fail()}})}function T(e){return new m({type:`${e.type}?`,schema:e.schema,validator:(t,r)=>void 0===t||r.check(t,e)})}function x(){return A("string",(e=>"string"==typeof e))}function A(e,t){return new m({type:e,validator:t,schema:null})}function S(e){return A(`${e.map((e=>e.type)).join(" | ")}`,(function*(t,r){for(const n of e){const[...e]=r.check(t,n);if(0===e.length)return}yield r.fail()}))}function D(e){const t=Object.keys(e);return r=>{if("object"!=typeof r||null==r)return r;const n={},o=new Set(Object.keys(r));for(const c of t){o.delete(c);const t=e[c],i=r[c];n[c]=w(i,t)}for(const e of o)n[e]=r[e];return n}}const N=/^\w+/,C=/^(.*)\[([0-9]*?)]$/,I=/^bytes([0-9]{1,2})$/,R=/^u?int([0-9]{0,3})$/,Y=["address","bool","bytes","string"],B=E(x(),"Type",((e,t)=>U(t.branch[0].types,e))),G=P({name:x(),type:B}),X=P({name:T(x()),version:T(x()),chainId:T(S([x(),_()])),verifyingContract:T(j(x(),/^0x[0-9a-z]{40}$/i)),salt:T(S([k(_()),j(x(),/^0x[0-9a-z]{64}$/i)]))}),J=P({types:(M=[function(e){const t=Object.keys(e);return A(`Type<{${t.join(",")}}>`,(function*(r,n){if("object"==typeof r&&null!=r)for(const o of t){const t=e[o],c=r[o];yield*n.check(c,t,r,o)}else yield n.fail()}))}({EIP712Domain:k(G)}),(z=x(),H=k(G),A(`Record<${z.type},${H.type}>`,(function*(e,t){if("object"==typeof e&&null!=e)for(const r in e){const n=e[r];yield*t.check(r,z,e,r),yield*t.check(n,H,e,r)}else yield t.fail()})))],A(M.map((e=>e.type)).join(" & "),(function*(e,t){for(const r of M)yield*t.check(e,r)}))),primaryType:x(),domain:X,message:P()});var M,z,H;const U=(e,t)=>{if(Y.includes(t))return!0;if(e[t])return!0;if(t.match(C)){const r=t.match(N);if(r){const t=r[0];return U(e,t)}}const r=t.match(I);if(r){const e=Number(r[1]);if(e>=1&&e<=32)return!0}const n=t.match(R);if(n){const e=Number(n[1]);if(e>=8&&e<=256&&e%8==0)return!0}return!1},V=e=>function(e,t){return!g(e,t)[0]}(e,J);var W=r(48764).Buffer;const q=W.from("1901","hex"),F=(e,t,r=[])=>{if(!V(e))throw new Error("Typed data does not match JSON schema");const n=t.match(N)[0];return r.includes(n)?r:e.types[n]?[n,...e.types[n].reduce(((t,r)=>[...t,...F(e,r.type,t).filter((e=>!t.includes(e)))]),[])]:r},K=(e,t)=>{const[r,...n]=F(e,t);return[r,...n.sort()].map((t=>`${t}(${e.types[t].map((e=>`${e.type} ${e.name}`))})`)).join("")},L=(e,t)=>f(K(e,t),"utf8"),Q=(e,t,r)=>{const n=t.match(C);if(n){const t=n[1],o=Number(n[2])||void 0;if(!Array.isArray(r))throw new Error("Cannot encode data: value is not of array type");if(o&&r.length!==o)throw new Error(`Cannot encode data: expected length of ${o}, but got ${r.length}`);const i=r.map((r=>Q(e,t,r))),a=i.map((e=>e[0])),s=i.map((e=>e[1]));return["bytes32",f(c(a,s))]}return e.types[t]?["bytes32",ee(e,t,r)]:"string"===t?["bytes32",f(r,"utf8")]:"bytes"===t?["bytes32",f(W.isBuffer(r)?r:u(r),"hex")]:[t,r]},Z=(e,t,r)=>{const[n,o]=e.types[t].reduce((([t,n],o)=>{if(void 0===r[o.name]||null===r[o.name])throw new Error(`Cannot encode data: missing data for '${o.name}'`);const c=r[o.name],[i,a]=Q(e,o.type,c);return[[...t,i],[...n,a]]}),[["bytes32"],[L(e,t)]]);return c(n,o)},ee=(e,t,r)=>f(Z(e,t,r)),te=(e,t)=>{const r=W.concat([q,ee(e,"EIP712Domain",e.domain),ee(e,e.primaryType,e.message)]);return t?f(r):r},re=(e,t=e.primaryType,r=e.message)=>{if(!V(e))throw new Error("Typed data does not match JSON schema");if(!e.types[t])throw new Error("Cannot get data as array: type does not exist");return e.types[t].reduce(((t,{name:n,type:o})=>{if(e.types[o]){if(!r[n])throw new Error(`Cannot get data as array: missing data for '${n}'`);return[...t,re(e,o,r[n])]}const c=r[n];return[...t,c]}),[])}}}]);